name: Game
states:
  state2:
    type: message_text
    properties:
      text: 'Tak prvni mesto je Praha, mas zacit "A"'
    transitions: 
        next_state: changeA
        
        
  changeA:
    type: change_context
    properties:
        del_keys:
            - bot_last_letter
            - bot_city
            - bot_big_letter
            - user_last_letter
            - user_big_letter
            - country
        update_keys:
           bot_last_letter: 'a'
           bot_city: 'Praha'
           bot_big_letter: 'A'
           country: 'Czech Republic'
           user_last_letter: 'null'
           user_big_letter: 'null'
    transitions:
        next_state: input
        
  input:
    type: input_user
    properties:
      entities:
        text_user: raw_text
    transitions:
      next_state: test1
      
  test1:
    type: text_test
    properties:
    transitions:
      next_state: right_wrong
      
  right_wrong:
    type: conditional_equal
    properties:
      value1: '{{result_user}}'
      value2: '{{result}}'
    transitions: 
      equal: result_right
      notequal: result_wrong
      
  result_right:
    type: message_text
    properties:
      text: 'Parada! Pisu dalsi mesto.'
    transitions: 
        next_state: new_city
        
  result_wrong:
    type: message_text
    properties:
      text: 'Fuj, takove hlavne mesto neexistuje, zkus jeste jednou.'
    transitions: 
        next_state: input
        
  new_city:
    type: random_city
    properties:
    transitions:
      next_state: do_bot_knows_city
      
  do_bot_knows_city:
    type: conditional_equal
    properties:
      value1: '{{result_bot}}'
      value2: '{{result}}'
    transitions: 
      equal: write_city
      notequal: wrong_city
      
  write_city:
    type: message_text
    properties:
      text: 'Dalsi mesto je {{bot_city}}, je to hlavni mesto statu {{country}} '
    transitions:
      next_state: write_letter
      
  write_letter:
    type: message_text
    properties:
      text: 'Mas napsat mesto, zacinajici "{{bot_big_letter}}" '
    transitions:
      next_state: input
      
  wrong_city:
    type: message_text
    properties:
      text: 'Bohuzel, neznam zadne mesto, zacinajici "{{user_big_letter}}", zkus neco vymyslet sam :)'
    transitions:
      next_state: input
  