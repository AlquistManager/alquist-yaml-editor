name: Teach
states:
  
  teach_bot:
    type: message_text
    properties:
      text: 'Pro dalsi postup musite napsat heslo.'
    transitions: 
        next_state: set_pass
  
  set_pass:
    type: change_context
    properties:
        del_keys:
            - pass
        update_keys:
           pass: '1337'
    transitions:
        next_state: input_pass
        
        
  input_pass:
    type: input_user
    properties:
      entities:
        user_pass: raw_text
    transitions:
      next_state: test_pass
      
  test_pass:
    type: conditional_equal
    properties:
      value1: '{{user_pass}}'
      value2: '{{pass}}'
    transitions:
      equal: continue
      notequal: return_to_init


  return_to_init:
    type: message_text
    properties:
      text: 'Bohuzel, to neni spravne heslo...vracim se na zacatek... '
    transitions:
      next_state: init


  continue:
    type: message_text
    properties:
      text: 'Zadejte, prosim, spravny nazev mesta v anglictine'
    transitions:
      next_state: set_city


  set_city:
    type: input_user
    properties:
      entities:
        new_city: raw_text
    transitions:
      next_state: con2


  con2:
    type: message_text
    properties:
      text: 'Ted zadejte stat tohoto mesta'
    transitions:
      next_state: set_country

  set_country:
    type: input_user
    properties:
      entities:
        new_country: raw_text
    transitions:
      next_state: con3


  con3:
    type: message_text
    properties:
      text: 'Ted zadejte vsichni mozne synonymy tohoto mesta'
    transitions:
      next_state: set_syn
    
  set_syn:
    type: input_user
    properties:
      entities:
        new_syn: raw_text
    transitions:
      next_state: con_or_return


  con_or_return:
    type: message_text
    properties:
      text: 'Dekuju moc. Chcete pokracovat v tom?'
    transitions:
      next_state: choose_con


  choose_con:
    type: message_buttons
    properties:
        buttons:
            - label: 'Pokracovat'
              next_state: continue
              type: Main
            - label: 'Zacit znova'
              next_state: init
              type: Main